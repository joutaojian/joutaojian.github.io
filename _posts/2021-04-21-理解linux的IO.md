---
title: 理解Linux的IO
layout: post
tags:
  - Linux
  - IO
category: 后台
---
可以看图理解，参考：https://blog.csdn.net/qq_36095679/article/details/89641867

## **IO的职责**

> 我们常说的IO，指的是数据的输入和输出

例子1：拿一次磁盘文件读取为例，我们要读取的文件是存储在磁盘上的，我们的目的是把它读取到内存中。

简化路径：内存（用户态） ←  内存（内核态） ←  硬盘(硬件IO)



例子2：一次Http请求为例，我们要读取数据是通过网卡进来的，我们的目的是把它读取到内存中。

简化路径：内存（用户态） ←  内存（内核态） ←  网卡(网络IO)



## IO的工作步骤

IO过程中分成**两个步䠫**：

1. 先 **等待** 设备将数据放到内核态（称为：等待期）
2. 后 **拷贝**内核态的数据到用户态（称为：拷贝期）

简化路径：内存（用户态） ←(拷贝数据到用户态内存)—  内存（内核态） ←(等待数据加载到内核)—  硬盘(硬件IO)



》实际上等待时间远高于拷贝时间，所以让IO更高效的**最核心办法是减少等待的时间**，拷贝时间固定。



## Linux有5种IO, 如何区分阻塞？同步？

> 阻塞IO，非阻塞IO，多路复用IO，信号量IO，异步IO

等待期：等待期才有阻塞和非阻塞的说法，线程一直阻塞住等待数据加载到内核，那就是阻塞

拷贝期：拷贝期才有同步和异步的说法，前四种都是同步IO（阻塞IO，非阻塞IO，多路复用IO，信号量IO）



所以5种IO严格上讲，全称是：

1. 同步阻塞IO
2. 同步非阻塞IO
3. 特殊的同步非阻塞IO（多路复用IO）
4. 特殊的同步非阻塞IO（信号量IO）
5. 非阻塞异步IO




## 并行系统的设计模式

常见的网络编程模型：Reactor, Proactor, Asynchronous, Completion Token, and Acceptor-Connector





## 总结

知道内核态和用户态，才能知道IO在做什么；

理解等待期和拷贝期，才能知道如何去优化IO速度；
