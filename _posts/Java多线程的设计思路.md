进程是程序向系统申请资源的基本单位，而线程是进程中可以独立执行的最小单位。

串行、并发与并行
串行：任务一个接一个执行
并发：以交替的方式执行多个任务
并行：以齐头并进的方式同时执行多个任务

竞态：计算结果的正确性与执行时间相关，有可能在不恰当的时间执行会出现错误的结果，存在竞态代表线程不安全。
竞态的两种代码模式：read-modify-write，check-and-act。（代表这两种代码模式容易出线程安全问题）

如何分析一个代码是否会出现线程安全问题？
1.判断是不是竞态
2.分析是不是竞态的两种代码模式
3.考虑共享变量和局部变量，利用二维表分析竞态

线程安全表现在3个方面：原子性，可见性，有序性。
原子性：针对共享变量的操作，从当前执行线程以外的其他线程看来都是不可分割的。
可见性：线程对共享变量操作之后，其他线程能够及时获取最新的值。
有序性：实际执行的结果和单线程的执行结果是一样的。

JMM定义：
Java内存规范试图定义一种Java内存模型，**来屏蔽掉各种硬件和操作系统的内存访问差异**，以实现Java程序在各种平台下都能达到一致的内存访问效果，定义了各个变量的访问规则，共有八种操作。JVM运行时内存区的实现参考了JMM。

JMM的as-if-serial语义：
为了提高性能，编译器和处理器常常会对指令进行重排序。

JMM的happens-before规则：

我发现JMM的出现很有意义啊，解决了重排序问题和不同硬件和OS解决CPU缓存一致性问题的差异

as-if-seria和happens-before是不是属于JMM的规范之一啊，前者为了解决单线程重排序问题，后者为了解决多线程重排序问题


